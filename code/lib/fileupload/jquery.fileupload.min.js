var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,k,a){d instanceof String&&(d=String(d));for(var b=d.length,c=0;c<b;c++){var e=d[c];if(k.call(a,e,c,d))return{i:c,v:e}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,k,a){if(d==Array.prototype||d==Object.prototype)return d;d[k]=a.value;return d};$jscomp.getGlobal=function(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var k=0;k<d.length;++k){var a=d[k];if(a&&a.Math==Math)return a}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(d,k){var a=$jscomp.propertyToPolyfillSymbol[k];if(null==a)return d[k];a=d[a];return void 0!==a?a:d[k]};
$jscomp.polyfill=function(d,k,a,b){k&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(d,k,a,b):$jscomp.polyfillUnisolated(d,k,a,b))};$jscomp.polyfillUnisolated=function(d,k,a,b){a=$jscomp.global;d=d.split(".");for(b=0;b<d.length-1;b++){var c=d[b];if(!(c in a))return;a=a[c]}d=d[d.length-1];b=a[d];k=k(b);k!=b&&null!=k&&$jscomp.defineProperty(a,d,{configurable:!0,writable:!0,value:k})};
$jscomp.polyfillIsolated=function(d,k,a,b){var c=d.split(".");d=1===c.length;b=c[0];b=!d&&b in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var e=0;e<c.length-1;e++){var f=c[e];if(!(f in b))return;b=b[f]}c=c[c.length-1];a=$jscomp.IS_SYMBOL_NATIVE&&"es6"===a?b[c]:null;k=k(a);null!=k&&(d?$jscomp.defineProperty($jscomp.polyfills,c,{configurable:!0,writable:!0,value:k}):k!==a&&(void 0===$jscomp.propertyToPolyfillSymbol[c]&&(a=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[c]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(c):$jscomp.POLYFILL_PREFIX+a+"$"+c),$jscomp.defineProperty(b,$jscomp.propertyToPolyfillSymbol[c],{configurable:!0,writable:!0,value:k})))};$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(k,a){return $jscomp.findInternal(this,k,a).v}},"es6","es3");
(function(d){"function"===typeof define&&define.amd?define(["jquery","jquery-ui/ui/widget"],d):"object"===typeof exports?d(require("jquery"),require("./vendor/jquery.ui.widget")):d(window.jQuery)})(function(d){function k(a){var b="dragover"===a;return function(c){c.dataTransfer=c.originalEvent&&c.originalEvent.dataTransfer;var e=c.dataTransfer;e&&-1!==d.inArray("Files",e.types)&&!1!==this._trigger(a,d.Event(a,{delegatedEvent:c}))&&(c.preventDefault(),b&&(e.dropEffect="copy"))}}d.support.fileInput=
!(/(Android (1\.[0156]|2\.[01]))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.[05]|3\.0))/.test(window.navigator.userAgent)||d('<input type="file"/>').prop("disabled"));d.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader);d.support.xhrFormDataFileUpload=!!window.FormData;d.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);d.widget("blueimp.fileupload",{options:{dropZone:d(document),
pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,uniqueFilenames:void 0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},
i18n:function(a,b){a=this.messages[a]||a.toString();b&&d.each(b,function(c,e){a=a.replace("{"+c+"}",e)});return a},formData:function(a){return a.serializeArray()},add:function(a,b){if(a.isDefaultPrevented())return!1;(b.autoUpload||!1!==b.autoUpload&&d(this).fileupload("option","autoUpload"))&&b.process().done(function(){b.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_promisePipe:function(){var a=d.fn.jquery.split(".");return 1<Number(a[0])||7<Number(a[1])?"then":"pipe"}(),_specialOptions:["fileInput",
"dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:d.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.bitrate=this.loaded=0;this.getBitrate=function(a,b,c){var e=a-this.timestamp;if(!this.bitrate||!c||e>c)this.bitrate=1E3/e*(b-this.loaded)*8,this.loaded=b,this.timestamp=a;return this.bitrate}},_isXHRUpload:function(a){return!a.forceIframeTransport&&
(!a.multipart&&d.support.xhrFileUpload||d.support.xhrFormDataFileUpload)},_getFormData:function(a){if("function"===d.type(a.formData))return a.formData(a.form);if(d.isArray(a.formData))return a.formData;if("object"===d.type(a.formData)){var b=[];d.each(a.formData,function(c,e){b.push({name:c,value:e})});return b}return[]},_getTotal:function(a){var b=0;d.each(a,function(c,e){b+=e.size||1});return b},_initProgressObject:function(a){var b={loaded:0,total:0,bitrate:0};a._progress?d.extend(a._progress,
b):a._progress=b},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)Object.prototype.hasOwnProperty.call(a._response,b)&&delete a._response[b];else a._response={}},_onProgress:function(a,b){if(a.lengthComputable){var c=Date.now?Date.now():(new Date).getTime();if(!(b._time&&b.progressInterval&&c-b._time<b.progressInterval&&a.loaded!==a.total)){b._time=c;var e=Math.floor(a.loaded/a.total*(b.chunkSize||b._progress.total))+(b.uploadedBytes||0);this._progress.loaded+=e-b._progress.loaded;
this._progress.bitrate=this._bitrateTimer.getBitrate(c,this._progress.loaded,b.bitrateInterval);b._progress.loaded=b.loaded=e;b._progress.bitrate=b.bitrate=b._bitrateTimer.getBitrate(c,e,b.bitrateInterval);this._trigger("progress",d.Event("progress",{delegatedEvent:a}),b);this._trigger("progressall",d.Event("progressall",{delegatedEvent:a}),this._progress)}}},_initProgressListener:function(a){var b=this,c=a.xhr?a.xhr():d.ajaxSettings.xhr();c.upload&&(d(c.upload).on("progress",function(e){var f=e.originalEvent;
e.lengthComputable=f.lengthComputable;e.loaded=f.loaded;e.total=f.total;b._onProgress(e,a)}),a.xhr=function(){return c})},_deinitProgressListener:function(a){a=a.xhr?a.xhr():d.ajaxSettings.xhr();a.upload&&d(a.upload).off("progress")},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_getUniqueFilename:function(a,b){a=String(a);if(b[a])return a=a.replace(/(?: \(([\d]+)\))?(\.[^.]+)?$/,function(c,e,f){return" ("+(e?Number(e)+1:1)+")"+(f||"")}),this._getUniqueFilename(a,
b);b[a]=!0;return a},_initXHRData:function(a){var b=this,c=a.files[0],e=a.multipart||!d.support.xhrFileUpload,f="array"===d.type(a.paramName)?a.paramName[0]:a.paramName;a.headers=d.extend({},a.headers);a.contentRange&&(a.headers["Content-Range"]=a.contentRange);e&&!a.blob&&this._isInstanceOf("File",c)||(a.headers["Content-Disposition"]='attachment; filename="'+encodeURI(c.uploadName||c.name)+'"');if(!e)a.contentType=c.type||"application/octet-stream",a.data=a.blob||c;else if(d.support.xhrFormDataFileUpload){if(a.postMessage){var g=
this._getFormData(a);a.blob?g.push({name:f,value:a.blob}):d.each(a.files,function(p,l){g.push({name:"array"===d.type(a.paramName)&&a.paramName[p]||f,value:l})})}else b._isInstanceOf("FormData",a.formData)?g=a.formData:(g=new FormData,d.each(this._getFormData(a),function(p,l){g.append(l.name,l.value)})),a.blob?g.append(f,a.blob,c.uploadName||c.name):d.each(a.files,function(p,l){if(b._isInstanceOf("File",l)||b._isInstanceOf("Blob",l)){var m=l.uploadName||l.name;a.uniqueFilenames&&(m=b._getUniqueFilename(m,
a.uniqueFilenames));g.append("array"===d.type(a.paramName)&&a.paramName[p]||f,l,m)}});a.data=g}a.blob=null},_initIframeSettings:function(a){var b=d("<a></a>").prop("href",a.url).prop("host");a.dataType="iframe "+(a.dataType||"");a.formData=this._getFormData(a);a.redirect&&b&&b!==location.host&&a.formData.push({name:a.redirectParamName||"redirect",value:a.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),
a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(a){var b=d(a.fileInput),c=a.paramName;c?d.isArray(c)||(c=[c]):(c=[],b.each(function(){var e=d(this),f=e.prop("name")||"files[]";for(e=(e.prop("files")||[1]).length;e;)c.push(f),--e}),c.length||(c=[b.prop("name")||"files[]"]));return c},_initFormSettings:function(a){a.form&&a.form.length||(a.form=d(a.fileInput.prop("form")),a.form.length||(a.form=d(this.options.fileInput.prop("form"))));
a.paramName=this._getParamName(a);a.url||(a.url=a.form.prop("action")||location.href);a.type=(a.type||"string"===d.type(a.form.prop("method"))&&a.form.prop("method")||"").toUpperCase();"POST"!==a.type&&"PUT"!==a.type&&"PATCH"!==a.type&&(a.type="POST");a.formAcceptCharset||(a.formAcceptCharset=a.form.attr("accept-charset"))},_getAJAXSettings:function(a){a=d.extend({},this.options,a);this._initFormSettings(a);this._initDataSettings(a);return a},_getDeferredState:function(a){return a.state?a.state():
a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(a,b,c){var e=d.Deferred(),f=e.promise();b=b||this.options.context||f;!0===a?e.resolveWith(b,c):!1===a&&e.rejectWith(b,c);f.abort=e.promise;return this._enhancePromise(f)},_addConvenienceMethods:function(a,b){var c=this,e=function(f){return d.Deferred().resolveWith(c,f).promise()};b.process=function(f,g){if(f||g)b._processQueue=
this._processQueue=(this._processQueue||e([this]))[c._promisePipe](function(){return b.errorThrown?d.Deferred().rejectWith(c,[b]).promise():e(arguments)})[c._promisePipe](f,g);return this._processQueue||e([this])};b.submit=function(){"pending"!==this.state()&&(b.jqXHR=this.jqXHR=!1!==c._trigger("submit",d.Event("submit",{delegatedEvent:a}),this)&&c._onSend(a,this));return this.jqXHR||c._getXHRPromise()};b.abort=function(){if(this.jqXHR)return this.jqXHR.abort();this.errorThrown="abort";c._trigger("fail",
null,this);return c._getXHRPromise(!1)};b.state=function(){if(this.jqXHR)return c._getDeferredState(this.jqXHR);if(this._processQueue)return c._getDeferredState(this._processQueue)};b.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===c._getDeferredState(this._processQueue)};b.progress=function(){return this._progress};b.response=function(){return this._response}},_getUploadedBytes:function(a){return(a=(a=(a=a.getResponseHeader("Range"))&&a.split("-"))&&1<a.length&&parseInt(a[1],
10))&&a+1},_chunkedUpload:function(a,b){a.uploadedBytes=a.uploadedBytes||0;var c=this,e=a.files[0],f=e.size,g=a.uploadedBytes,p=a.maxChunkSize||f,l=this._blobSlice,m=d.Deferred(),n=m.promise(),q;if(!(this._isXHRUpload(a)&&l&&(g||("function"===d.type(p)?p(a):p)<f))||a.data)return!1;if(b)return!0;if(g>=f)return e.error=a.i18n("uploadedBytes"),this._getXHRPromise(!1,a.context,[null,"error",e.error]);var u=function(){var h=d.extend({},a),v=h._progress.loaded;h.blob=l.call(e,g,g+("function"===d.type(p)?
p(h):p),e.type);h.chunkSize=h.blob.size;h.contentRange="bytes "+g+"-"+(g+h.chunkSize-1)+"/"+f;c._trigger("chunkbeforesend",null,h);c._initXHRData(h);c._initProgressListener(h);q=(!1!==c._trigger("chunksend",null,h)&&d.ajax(h)||c._getXHRPromise(!1,h.context)).done(function(r,w,t){g=c._getUploadedBytes(t)||g+h.chunkSize;v+h.chunkSize-h._progress.loaded&&c._onProgress(d.Event("progress",{lengthComputable:!0,loaded:g-h.uploadedBytes,total:g-h.uploadedBytes}),h);a.uploadedBytes=h.uploadedBytes=g;h.result=
r;h.textStatus=w;h.jqXHR=t;c._trigger("chunkdone",null,h);c._trigger("chunkalways",null,h);g<f?u():m.resolveWith(h.context,[r,w,t])}).fail(function(r,w,t){h.jqXHR=r;h.textStatus=w;h.errorThrown=t;c._trigger("chunkfail",null,h);c._trigger("chunkalways",null,h);m.rejectWith(h.context,[r,w,t])}).always(function(){c._deinitProgressListener(h)})};this._enhancePromise(n);n.abort=function(){return q.abort()};u();return n},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=
new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0);this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||0;b._progress.total=b.total=this._getTotal(b.files)||1;b._progress.bitrate=b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(a,b,c,e){var f=e._progress.total,g=e._response;e._progress.loaded<f&&this._onProgress(d.Event("progress",{lengthComputable:!0,
loaded:f,total:f}),e);g.result=e.result=a;g.textStatus=e.textStatus=b;g.jqXHR=e.jqXHR=c;this._trigger("done",null,e)},_onFail:function(a,b,c,e){var f=e._response;e.recalculateProgress&&(this._progress.loaded-=e._progress.loaded,this._progress.total-=e._progress.total);f.jqXHR=e.jqXHR=a;f.textStatus=e.textStatus=b;f.errorThrown=e.errorThrown=c;this._trigger("fail",null,e)},_onAlways:function(a,b,c,e){this._trigger("always",null,e)},_onSend:function(a,b){b.submit||this._addConvenienceMethods(a,b);var c=
this,e,f,g=c._getAJAXSettings(b),p=function(){c._sending+=1;g._bitrateTimer=new c._BitrateTimer;return e=e||((f||!1===c._trigger("send",d.Event("send",{delegatedEvent:a}),g))&&c._getXHRPromise(!1,g.context,f)||c._chunkedUpload(g)||d.ajax(g)).done(function(m,n,q){c._onDone(m,n,q,g)}).fail(function(m,n,q){c._onFail(m,n,q,g)}).always(function(m,n,q){c._deinitProgressListener(g);c._onAlways(m,n,q,g);--c._sending;--c._active;if(g.limitConcurrentUploads&&g.limitConcurrentUploads>c._sending)for(m=c._slots.shift();m;){if("pending"===
c._getDeferredState(m)){m.resolve();break}m=c._slots.shift()}0===c._active&&c._trigger("stop")})};this._beforeSend(a,g);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(1<this.options.limitConcurrentUploads){var l=d.Deferred();this._slots.push(l);b=l[c._promisePipe](p)}else b=this._sequence=this._sequence[c._promisePipe](p,p);b.abort=function(){f=[void 0,"abort","abort"];return e?e.abort():(l&&l.rejectWith(g.context,f),
p())};return this._enhancePromise(b)}return p()},_onAdd:function(a,b){var c=this,e=!0,f=d.extend({},this.options,b),g=b.files,p=g.length,l=f.limitMultiFileUploads,m=f.limitMultiFileUploadSize,n=f.limitMultiFileUploadSizeOverhead,q=0,u=this._getParamName(f),h=0;if(!p)return!1;m&&void 0===g[0].size&&(m=void 0);if((f.singleFileUploads||l||m)&&this._isXHRUpload(f))if(f.singleFileUploads||m||!l)if(!f.singleFileUploads&&m){var v=[];var r=[];for(f=0;f<p;f+=1)if(q+=g[f].size+n,f+1===p||q+g[f+1].size+n>m||
l&&f+1-h>=l)v.push(g.slice(h,f+1)),q=u.slice(h,f+1),q.length||(q=u),r.push(q),h=f+1,q=0}else r=u;else for(v=[],r=[],f=0;f<p;f+=l)v.push(g.slice(f,f+l)),q=u.slice(f,f+l),q.length||(q=u),r.push(q);else v=[g],r=[u];b.originalFiles=g;d.each(v||g,function(w,t){var x=d.extend({},b);x.files=v?t:[t];x.paramName=r[w];c._initResponseObject(x);c._initProgressObject(x);c._addConvenienceMethods(a,x);return e=c._trigger("add",d.Event("add",{delegatedEvent:a}),x)});return e},_replaceFileInput:function(a){var b=
a.fileInput,c=b.clone(!0),e=b.is(document.activeElement);a.fileInputClone=c;d("<form></form>").append(c)[0].reset();b.after(c).detach();e&&c.trigger("focus");d.cleanData(b.off("remove"));this.options.fileInput=this.options.fileInput.map(function(f,g){return g===b[0]?c[0]:g});b[0]===this.element[0]&&(this.element=c)},_handleFileTreeEntry:function(a,b){var c=this,e=d.Deferred(),f=[],g=function(n){n&&!n.entry&&(n.entry=a);e.resolve([n])},p=function(n){c._handleFileTreeEntries(n,b+a.name+"/").done(function(q){e.resolve(q)}).fail(g)},
l=function(){m.readEntries(function(n){n.length?(f=f.concat(n),l()):p(f)},g)};b=b||"";if(a.isFile)a._file?(a._file.relativePath=b,e.resolve(a._file)):a.file(function(n){n.relativePath=b;e.resolve(n)},g);else if(a.isDirectory){var m=a.createReader();l()}else e.resolve([]);return e.promise()},_handleFileTreeEntries:function(a,b){var c=this;return d.when.apply(d,d.map(a,function(e){return c._handleFileTreeEntry(e,b)}))[this._promisePipe](function(){return Array.prototype.concat.apply([],arguments)})},
_getDroppedFiles:function(a){a=a||{};var b=a.items;return b&&b.length&&(b[0].webkitGetAsEntry||b[0].getAsEntry)?this._handleFileTreeEntries(d.map(b,function(c){var e;if(c.webkitGetAsEntry){if(e=c.webkitGetAsEntry())e._file=c.getAsFile();return e}return c.getAsEntry()})):d.Deferred().resolve(d.makeArray(a.files)).promise()},_getSingleFileInputFiles:function(a){a=d(a);var b=a.prop("entries");if(b&&b.length)return this._handleFileTreeEntries(b);b=d.makeArray(a.prop("files"));if(b.length)void 0===b[0].name&&
b[0].fileName&&d.each(b,function(c,e){e.name=e.fileName;e.size=e.fileSize});else{a=a.prop("value");if(!a)return d.Deferred().resolve([]).promise();b=[{name:a.replace(/^.*\\/,"")}]}return d.Deferred().resolve(b).promise()},_getFileInputFiles:function(a){return a instanceof d&&1!==a.length?d.when.apply(d,d.map(a,this._getSingleFileInputFiles))[this._promisePipe](function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(a)},_onChange:function(a){var b=this,c={fileInput:d(a.target),
form:d(a.target.form)};this._getFileInputFiles(c.fileInput).always(function(e){c.files=e;b.options.replaceFileInput&&b._replaceFileInput(c);!1!==b._trigger("change",d.Event("change",{delegatedEvent:a}),c)&&b._onAdd(a,c)})},_onPaste:function(a){var b=a.originalEvent&&a.originalEvent.clipboardData&&a.originalEvent.clipboardData.items,c={files:[]};b&&b.length&&(d.each(b,function(e,f){(e=f.getAsFile&&f.getAsFile())&&c.files.push(e)}),!1!==this._trigger("paste",d.Event("paste",{delegatedEvent:a}),c)&&
this._onAdd(a,c))},_onDrop:function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var b=this,c=a.dataTransfer,e={};c&&c.files&&c.files.length&&(a.preventDefault(),this._getDroppedFiles(c).always(function(f){e.files=f;!1!==b._trigger("drop",d.Event("drop",{delegatedEvent:a}),e)&&b._onAdd(a,e)}))},_onDragOver:k("dragover"),_onDragEnter:k("dragenter"),_onDragLeave:k("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,
drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste}));d.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(a,b){var c=-1!==d.inArray(a,this._specialOptions);
c&&this._destroyEventHandlers();this._super(a,b);c&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var a=this.options;void 0===a.fileInput?a.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):a.fileInput instanceof d||(a.fileInput=d(a.fileInput));a.dropZone instanceof d||(a.dropZone=d(a.dropZone));a.pasteZone instanceof d||(a.pasteZone=d(a.pasteZone))},_getRegExp:function(a){a=a.split("/");var b=a.pop();a.shift();
return new RegExp(a.join("/"),b)},_isRegExpOption:function(a,b){return"url"!==a&&"string"===d.type(b)&&/^\/.*\/[igm]{0,3}$/.test(b)},_initDataAttributes:function(){var a=this,b=this.options,c=this.element.data();d.each(this.element[0].attributes,function(e,f){e=f.name.toLowerCase();/^data-/.test(e)&&(e=e.slice(5).replace(/-[a-z]/g,function(g){return g.charAt(1).toUpperCase()}),f=c[e],a._isRegExpOption(e,f)&&(f=a._getRegExp(f)),b[e]=f)})},_create:function(){this._initDataAttributes();this._initSpecialOptions();
this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(a){var b=this;a&&!this.options.disabled&&(a.fileInput&&!a.files?this._getFileInputFiles(a.fileInput).always(function(c){a.files=c;b._onAdd(null,a)}):(a.files=d.makeArray(a.files),this._onAdd(null,a)))},send:function(a){if(a&&!this.options.disabled){if(a.fileInput&&
!a.files){var b=this,c=d.Deferred(),e=c.promise(),f,g;e.abort=function(){g=!0;if(f)return f.abort();c.reject(null,"abort","abort");return e};this._getFileInputFiles(a.fileInput).always(function(p){g||(p.length?(a.files=p,f=b._onSend(null,a),f.then(function(l,m,n){c.resolve(l,m,n)},function(l,m,n){c.reject(l,m,n)})):c.reject())});return this._enhancePromise(e)}a.files=d.makeArray(a.files);if(a.files.length)return this._onSend(null,a)}return this._getXHRPromise(!1,a&&a.context)}})});
